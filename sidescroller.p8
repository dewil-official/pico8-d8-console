pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- game: sidescroller
palt(0, false) -- enable black color
palt(2, true) -- make red/violet transparent instead

-- main game loop
function _update()
	controls()
	move()
end

-- main graphics loop
function _draw()
	drawbackground()
	drawmap()
	drawcharacter()
end
-->8
-- game mechanics
player = { x=56, y=56 }
movedir = { x=0, y=0 }
fallacc = 0

function controls()
	-- move right
	if (btn(1) and not collide(1)) then
		movedir.x=2
		facedir = 1
	-- move left
	elseif (btn(0) and not collide(0)) then
		movedir.x=-2
		facedir = 0
	-- acceleration
	elseif (movedir.x>0) then
		movedir.x-=0.5
	elseif (movedir.x<0) then
		movedir.x+=0.5
	end
end

function move()
	if (not collide()) then
		player.x+=movedir.x
		player.x=max(player.x,0)
		player.y+=movedir.y
	end
end

function collide(dir)
	mapx = max(0,flr((player.x-56)/8))
	-- left
	if (dir==0) then
		if (fget(mget(x,y), 0)) return true
	-- right	
	elseif (dir==1) then
	
	-- up
	elseif (dir==2) then
	
	-- down
	elseif (dir==3) then
	
	end
end
-->8
-- graphics
facedir = 1 -- 1=right,0=left

function drawbackground()
	rectfill(0,0,127,127,1)
end

function drawcharacter()
	if (facedir==1) then
		-- walk to the right
 	if (btn(1)) then
  	spr(4,min(player.x,56),player.y)
  	spr(5,min(player.x,56)+8,player.y)
  	spr(20,min(player.x,56),player.y+8)
  	spr(21,min(player.x,56)+8,player.y+8)
 	-- stand to the right
 	else
  	spr(0,min(player.x,56),player.y)
  	spr(1,min(player.x,56)+8,player.y)
  	spr(16,min(player.x,56),player.y+8)
  	spr(17,min(player.x,56)+8,player.y+8)
 	end
 elseif (facedir==0) then
 	-- walk to the left
 	if (btn(0)) then
  	spr(4,min(player.x,56)+8,player.y,1,1,true)
  	spr(5,min(player.x,56),player.y,1,1,true)
  	spr(20,min(player.x,56)+8,player.y+8,1,1,true)
  	spr(21,min(player.x,56),player.y+8,1,1,true)
 	-- stand to the left
 	else
  	spr(0,min(player.x,56)+8,player.y,1,1,true)
  	spr(1,min(player.x,56),player.y,1,1,true)
  	spr(16,min(player.x,56)+8,player.y+8,1,1,true)
  	spr(17,min(player.x,56),player.y+8,1,1,true)
 	end
 end
end

function drawmap()
	offset = divremain(player.x)*(-1)
	if (player.x<56) offset=0
	mapx = max(0,flr((player.x-56)/8))
	map(mapx,0,offset,0,17,16)
end

-- divide any number and return the rest
function divremain(x)
	return (x/8-flr(x/8))*8
end


__gfx__
22200000022222222222200000220002222220000022222222222222222222222222222222222222222222222222222222222222222222222222222222222222
220cccccc002222222220ccccc00fff022220ccccc00022222222222222222222222222222222222222222222222222222222222222222222222222222222222
20ccccccccc022222220cccccccc0ff02220ccccccccc02222222222222222222222222222222222222222222222222222222222222222222222222222222222
2000ff0f00022222222000ff0f000c02222000ff0f00022222222222222222222222222222222222222222222222222222222222222222222222222222222222
0ff00f0ffff02222220ff00f0ffffc02220ff00f0ffff02222222222222222222222222222222222222222222222222222222222222222222222222222222222
0ff00ff0fff02222220ff00ff0fffc02220ff00ff0fff02222222222222222222222222222222222222222222222222222222222222222222222222222222222
200fff000002222222200fff0000002222200fff0000022222222222222222222222222222222222222222222222222222222222222222222222222222222222
2200fffff0222222222200ffffffc022222000fffff0222222222222222222222222222222222222222222222222222222222222222222222222222222222222
20cc00cc02222222220ccc0ccc0c0222200ccc00cc00022222222222222222222222222222222222222222222222222222222222222222222222222222222222
0cccc00cc02222222000ccc0ccc000020ffcccc00cc0c02222222222222222222222222222222222222222222222222222222222222222222222222222222222
0cccc000002222220fff0cc0f00f0cc00fffcc000000cf0222222222222222222222222222222222222222222222222222222222222222222222222222222222
20fff00f002222220fff0c000000ccc020ff0000f00f0f0222222222222222222222222222222222222222222222222222222222222222222222222222222222
20ffccc00022222220c000000000cc0222000000000cc02222222222222222222222222222222222222222222222222222222222222222222222222222222222
220ccccc022222220ccc00000000cc0220cc000000ccc02222222222222222222222222222222222222222222222222222222222222222222222222222222222
22000000022222220cc000000222002220ccc0220ccc022222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222002000222222222220002222000222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
33333333222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
ff44ff44222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
f44ff44f222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
44ff44ff222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
4ff44ff4222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
ff44ff44222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
f44ff44f222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
44ff44ff222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
4ff44ff4222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
ff44ff44222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
f44ff44f222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
44ff44ff222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
4ff44ff4222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
ff44ff44222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
f44ff44f222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
44ff44ff222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022222222
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
6060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
